{% extends 'base.html' %}
{% block content %}
<div class="board">
    <div class="lower-part">
        <div class="free-board-container">
            글 쓴이 : {{post.owner}}<br>
            글 제목 : {{post.title}}<br>
            내용 : {{post.body}}<br>
            <div class="freeboard-detail-btns">
                <button class="gofreeboard"onclick="location.href='{% url 'freeboard' %}'">목록</button>
                {% if user.username == post.owner %}
                <button class="editpost"onclick="location.href='{% url 'editpost' post.id %}'">수정하기</button>
                <button class="deletepost"onclick="location.href='{% url 'deletepost' post.id %}'">삭제하기</button>
            {% endif %}
            </div>
        </div>
        <div class="post-comments">
                <form method="POST" class="comment-form" action="{% url 'writecomment' post.id %}">
                    {% csrf_token %}
                    <textarea class="comment-box" name="comment"></textarea>
                    <button class="comment-submit">작성</button>
                </form>
                <table class="comments">
                    <tr class="comment-header">
                        <th class="comment-author">작성자</th>
                        <th class="comment-text">내용</th>
                        <th></th>
                    </tr>
                    {% for c in post.comments.all %}
                    <tr>
                        {% if c.author %}
                        <td class="comment-author">{{c.author}}</td>
                        {% else %}
                        <td class="comment-author">손님</td>
                        {% endif %}
                        <td class="comment-text">{{c.text}}</td>
                        <td class="comment-delete"><button class="comment-delete-button"onclick="location.href='{% url 'deletecomment' post.id c.id %}'">삭제</button></td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
    </div>
</div>


{% endblock %}